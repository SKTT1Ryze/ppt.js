<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>ccc's graduation project</title>

    <style>
      .tiedContainer {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }

      .tiedItem {
        display: flex;
        flex: 1 1 150px;
        margin: 5px 64px;
        height: 50px;
        justify-content: left;
      }

      .imageText {
        display: flex;
        gap: 16px;
        /* align-items: center; */
        justify-content: space-between;

        .imageTextItem {
          display: flex;
          flex: 1;
          flex-wrap: wrap;
          align-content: center;
        }

        .image {
          display: flex;
          flex: 1;
        }
      }

      .codeText {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
      }

      .codeTextItem {
        flex: 1 1 150px;
        margin-right: 50px;
        margin-top: 0px;
      }

      .archDesignContainer {
        display: flex;
        flex-direction: column;
        gap: 30px;

        .io_uring {
          display: flex;
          height: 50px;
          width: 200px;
          border: solid yellow;
          border-radius: 0.2rem;
          background: #ffff0069;
          margin: auto;
          justify-content: center;
          align-items: center;
        }

        .scheduler {
          display: flex;
          height: 50px;
          width: 500px;
          border: solid blue;
          border-radius: 0.2rem;
          background: #00ceff73;
          margin: auto;
          padding-right: 30px;
          justify-content: right;
          align-items: center;
        }

        .executor {
          display: flex;
          height: 50px;
          width: 200px;
          border: solid red;
          border-radius: 0.2rem;
          background: #ff000045;
          margin: auto;
          justify-content: center;
          align-items: center;
        }

        .task {
          display: flex;
          position: fixed;
          height: 30px;
          width: 30px;
          border: solid green;
          border-radius: 0.2rem;
          background: #00800054;
          justify-content: center;
          align-items: center;
          font-size: small;
        }

        .label {
          position: fixed;
        }
      }
    </style>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/custom.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <link rel="icon" href="images/sktt1ryze.jpg" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <img
          src="images/hust.png"
          alt="hust_logo"
          width="80"
          height="80"
          style="float: left"
        />

        <a href="https://github.com/SKTT1Ryze/ppt.js">
          <img
            src="images/github.svg"
            alt="github"
            width="50"
            height="50"
            style="float: right"
          />
        </a>

        <section
          data-background-image="images/background2.jpeg"
          data-background-opacity="0.25"
        >
          <h2>High Performance Asynchronous Programming Framework</h2>
          <h4>based on Linux Asynchronous I/O and Coroutine</h4>
          <!-- <h3 class="tiedContainer"> -->
          <!--   <div class="tiedItem">答辩学生：车春池</div> -->
          <!-- </h3> -->
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <!-- <h2>Contents</h2> -->
          <h3 class="tiedContainer">
            <div class="tiedItem">
              <a href="/#/2">
                01 Introduction
              </a>
            </div>
            <div class="tiedItem">
              <a href="/#/8">
                02 Literature Review
              </a>
            </div>
          </h3>
          <h3 class="tiedContainer">
            <div class="tiedItem">
              <a href="/#/9">
                03 Methodology
              </a>
            </div>
            <div class="tiedItem">
              <a href="/#/23">
                04 Results
              </a>
            </div>
          </h3>
        </section>
        <!-- 下面我将会从以下四个方面介绍我的毕设项目。 -->

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Background of the Study</h3>
          <div style="text-align: left">
            <h4>The Input/Output(I/O) operations in the traditional high-concurrency system:</h4>
            <ol>
              <li>use Synchronous I/O</li>
              <ul>
                <li>Applications processing cannot continue until the I/O operation is completed.</li>
              </ul>
              <li>use Multithreading</li>
              <ul>
                <li>The cost of thread switching is very high.</li>
              </ul>
            </ol>
            <h4 class="fragment" style="margin-top: 16px;color: red">
              Both of them lead to weak system throughput performance in high-concurrency scenarios.
            </h4>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Modern Solutions</h3>
          <div style="text-align: left">
            <h4>Maybe we can improve this situation with two steps:</h4>
            <ol>
              <li>replace Synchronous I/O with the Asynchronous I/O.</li>
              <li>utilize the Coroutine technology.</li>
            </ol>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Asynchronous I/O vs Synchronous I/O</h3>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  Synchronous I/O operations block the thread until the I/O request has completed.
                </li>
                <li style="margin-bottom: 5px">
                  Asynchronous I/O operations run in the background and do not block any thread.
                </li>
              </ol>
              <h4 class="fragment" style="text-align:left;margin-top: 16px;color: #00b9ff">
                Asynchronous I/O improves performance, because I/O operations and application processing can run in parallel.
              </h4>
            </div>
            <div class="image">
              <img
                src="images/sync_io_vs_async_io.png"
                alt="sync-vs-async"
                width="600"
                style="float: right"
              />
            </div>
          </div>
        </section>
        <!-- In synchronous I/O, a thread starts an I/O operation and immediately enters a wait state until the I/O request has completed. -->
        <!-- A thread performing asynchronous I/O sends an I/O request to the kernel by calling an appropriate function. -->
        <!-- If the request is accepted by the kernel, the calling thread continues processing another job until the kernel signals to the thread that the I/O operation is complete. -->
        <!-- It then interrupts its current job and processes the data from the I/O operation as necessary. -->

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>io_uring: Asynchronous I/O API for Linux</h3>
          <h4 style="text-align: left">io_uring is a new asynchronous I/O API for Linux with very low performance overheads.</h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  Shared memory and circular queues for information exchange between kernel and user.
                </li>
                <!-- it uses shared memory and circular queues to facilitate information exchange between kernel space and user space. -->
                <li style="margin-bottom: 5px">Submission Queue(SQ) for submitting I/O requests.</li>
                <li style="margin-bottom: 5px">
                  Completion Queue(CQ) for obtaining I/O completion events.
                </li>
                <!-- <li style="margin-bottom: 5px"> -->
                <!--   it supports lock-free concurrency, and achieves state synchronization internally through memory barrier techniques. -->
                <!-- </li> -->
              </ol>
            </div>
            <div class="image">
              <img
                src="images/io_uring.png"
                alt="io_uring"
                width="600"
                style="float: right"
              />
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Coroutine: suspendable and resumable Function</h3>
          <h4 style="text-align: left">Coroutines are functions that allow execution to be suspended and resumed.</h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  A coroutine is a function that can suspend execution to be resumed later.
                </li>
                <li style="margin-bottom: 5px">
                  It allows handle non-blocking I/O without explicit callbacks.
                </li>
                <li style="margin-bottom: 5px">Advantages over threads: Lower context-switching overhead.</li>
                <li style="margin-bottom: 5px">
                  Disadvantages over threads: Inability to utilize multi-core CPU, cannot execute concurrently.
                </li>
              </ol>
            </div>
            <div class="image">
              <img
                src="images/coroutines.png"
                alt="coroutine"
                width="550"
                style="float: right"
              />
            </div>
          </div>
          <h5 style="text-align: right">
            <a href="https://blog.eiler.eu/posts/20210512/">reference</a>
          </h5>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Research Objectives</h3>
          <div style="text-align: left">
            <h4>
              The goal is to design and implement a <b>high-performance programming framework</b> similar to <b>OpenMPI</b> but with distinct features based on Linux io_uring and Coroutines.
            </h4>
            <ol>
              <li>Faster then<li>
            </ol>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>The Framework vs OpenMPI</h3>
          <div class="imageText">
            <div class="imageTextItem">
              <h4>Commonalities with OpenMPI:</h4>
              <ol>
                <li style="margin-bottom: 5px">Aim to enhance system performance.</li>
                <li style="margin-bottom: 5px">
                  Applicable to system where multiple tasks are executed concurrently.
                </li>
              </ol>
            </div>
            <div class="imageTextItem">
              <h4>Differences from OpenMPI:</h4>
              <ol>
                <li style="margin-bottom: 5px">
                  It's designed for I/O-intensive tasks while OpenMPI is designed for compute-intensive tasks.
                </li>
                <li style="margin-bottom: 5px">
                  It's based on asynchronous coroutines while OpenMPI is based on inter-process communication.
                </li>
                <li style="margin-bottom: 5px">
                  It typically manages concurrency within a single computer while OpenMPI is primarily used across multiple computers or compute nodes.
                </li>
              </ol>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Literature Review</h3>
          <h4 style="text-align: left">
            There are some relevant literature:
          </h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  <a href="https://dl.acm.org/doi/abs/10.1145/3534056.3534945">
                    Understanding modern storage APIs: a systematic study of libaio, SPDK, and io_uring
                  </a>
                </li>
                <li style="margin-bottom: 5px">
                  <a href="https://cir.nii.ac.jp/crid/1050011097152555264">
                    Comparative Evaluation of Asynchronous IO Interface between io_uring and libaio implemented in a NoSQL DB for SSDs
                  </a>
                </li>
                <li style="margin-bottom: 5px">
                  <a href="http://131.159.16.103/~fent/papers/coroutines.pdf">
                    Use Coroutines for Asynchronous I/O to Hide I/O Latencies and Maximize the Read Bandwidth
                  </a>
                </li>
                <li style="margin-bottom: 5px">
                  <a href="https://ieeexplore.ieee.org/abstract/document/10177439">
                    Evaluating Asynchronous Parallel I/O on HPC Systems
                  </a>
                </li>
              </ol>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div>
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:150px">
                Task
              </div>
              <div class="label" style="bottom:90px;left:20px;">Create task</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div>
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:150px">
                Task
              </div>
              <div class="label" style="bottom:180px;left:160px;">Submit I/O request</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div>
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:250px">
                Task
              </div>
              <div class="label" style="bottom:90px;left:150px;">Push</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div>
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:250px">
                Task
              </div>
              <div class="label" style="bottom:180px;left:600px;">Complete</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:800px">
                Task
              </div>
              <div class="label" style="bottom:90px;left:750px;">Pop</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:10px;left:540px">
                Task
              </div>
              <div class="label" style="bottom:10px;left:600px;">Execute</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:-80px;left:460px">
                Task
              </div>
              <div class="label" style="bottom:-80px;left:520px;">Finish</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:10px;left:540px">
                Task
              </div>
              <div class="label" style="bottom:10px;left:600px;">If reach next I/O...</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:10px;left:150px">
                Task
              </div>
              <div class="label" style="bottom:10px;left:200px;">Suspend the task</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
          data-auto-animate
        >
          <div style="height:100%">
            <h3 style="position:relative;bottom:100px">Architectural Design</h3>
            <div class="archDesignContainer">
              <div data-id="io_uring" class="io_uring">IoUring</div>
              <div data-id="scheduler" class="scheduler">Waiting Queue</div>
              <div data-id="executor" class="executor">Executor</div>
              <div data-id="task0" class="task" style="bottom:90px;left:150px">
                Task
              </div>
              <div class="label" style="bottom:90px;left:20px;">Repeat</div>
              <div data-id="task1" class="task" style="bottom:90px;left:300px"></div>
              <div data-id="task2" class="task" style="bottom:90px;left:350px"></div>
              <div data-id="task3" class="task" style="bottom:90px;left:400px"></div>
              <div data-id="task4" class="task" style="bottom:90px;left:450px"><div>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h4>Multi-core Design</h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  Refer to the design of <a
                    href="https://helda.helsinki.fi//bitstream/handle/10138/313642/tpc_ancs19.pdf?sequence=1"
                    >Thread-Per-Core</a>.
                </li>
                <li style="margin-bottom: 5px">
                  Bind an io_uring to each cpu core.
                </li>
                <li style="margin-bottom: 5px">
                  Tasks registered in the same io_uring can only run on the same cpu core.
                </li>
                <li style="margin-bottom: 5px">
                  The goal is to reduce inter-core data synchronization and thread switching.
                </li>
              </ol>
            </div>
            <div class="image">
              <img
                src="images/multicore-design.drawio.svg"
                alt="multicore-design"
                width="520"
                height="400"
                style="float: right"
              />
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Into the Code</h3>
          <div class="codeText">
            <div class="codeTextItem" style="vertical-align: middle">
              <h4>If we do no have the framework...</h4>
              <h3 class="fragment" style="color:red">
                The code is very complex and ugly!
              </h3>
              <h3 class="fragment" style="color:#c21212d6">
                Just imagine if there is no OpenMPI in the field of parallel computing.
              </h3>
            </div>
            <div class="codeTextItem">
              <pre><code data-line-numbers data-trim data-noescape><script type="text/template">
                #include <iostream>
 
                #define STATE_INIT 0
                #define STATE_READY 1
                #define STATE_PENDING 2
                
                // API provided by async I/O
                extern int submit_io();
                extern int check_io_completion(int token);
                extern int get_result(int token);
                
                class Task
                {
                public:
                    Task() {
                        this->state = STATE_INIT;
                        this->token = 0;
                    }
                    int execute(std::function<void(int)> callback)
                    {
                        switch (state)
                        {
                        case STATE_INIT:
                            // first-time execution, submit the I/O request
                            this->token = submit_io();
                            return STATE_PENDING;
                            break;
                        case STATE_PENDING:
                            if (check_io_completion(this->token))
                            {
                                // I/O completed, get the result
                                int result = get_result(this->token);
                                // execute the callback
                                callback(result);
                                return STATE_READY;
                            }
                            else
                            {
                                return STATE_PENDING;
                            }
                        case STATE_READY:
                            return STATE_READY;
                        default:
                            break;
                        }
                    }
                
                private:
                    int state;
                    int token;
                };
              </script></code></pre>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h3>Into the Code</h3>
          <div class="codeText">
            <div class="codeTextItem" style="vertical-align: middle">
              <h4>But if we have the framework...</h4>
              <h3 class="fragment" style="color:blue">
                The code is simple and elegant!
              </h3>
            </div>
            <div class="codeTextItem">
              <pre><code data-line-numbers data-trim data-noescape><script type="text/template">
                #include "framework.h" // provided by framework
                #include <iostream>

                // API provied by framework
                extern int async_io();

                int task() {
                  auto result = co_await async_io();
                  std::cout << "Result is " << result << "\n";

                  return 0;
                }
              </script></code></pre>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h4>
            <a href="https://github.com/sekirio-rs/Emma">Emma</a>（Rust）和<a
              href="https://github.com/sekirio-rs/Kuro"
              >Kuro</a
            >（C++）
          </h4>
          <div class="codeText">
            <div class="codeTextItem">
              <img src="images/emma.png" alt="emma" />
            </div>
            <div class="codeTextItem">
              <img src="images/kuro.png" alt="kuro" />
            </div>
          </div>
        </section>
        <!-- 最终成果是实现了两个异步编程框架Emma和Kuro。 -->

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h4>性能测试</h4>
          <div class="codeText">
            <div class="codeTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  测试对象：Emma，Kuro和以下框架；
                </li>
                <ul>
                  <li style="margin-bottom: 5px">
                    Tokio：最成熟的Rust异步运行时；
                  </li>
                  <li style="margin-bottom: 5px">
                    async-std：Rust异步运行时新起之秀；
                  </li>
                  <li style="margin-bottom: 5px">Go：Go语言原生协程框架;</li>
                  <li style="margin-bottom: 5px">
                    Sync：同步I/O和多线程框架。
                  </li>
                </ul>
                <li style="margin-bottom: 5px">
                  测试方法：用各个框架实现一个HTTP服务器，然后使用Apache
                  Benchmark软件对服务器进行压力测试，并对比测试结果；
                </li>
                <li style="margin-bottom: 5px">测试指标：服务器吞吐量；</li>
                <li style="margin-bottom: 5px">测试环境：</li>
                <ul>
                  <li style="margin-bottom: 5px">
                    CPU：Intel(R) Xeon(R) Gold 5117 CPU @ 2.00GHz，56核；
                  </li>
                  <li style="margin-bottom: 5px">
                    内存：32GB，2666 MT/s x 16（条）；
                  </li>
                  <li style="margin-bottom: 5px">
                    网卡：Intel Corporation Ethernet Connection X722 for 10GbE
                    SFP+ (rev 09)。
                  </li>
                </ul>
              </ol>
            </div>
            <div class="codeTextItem">
              <img
                src="images/per-test.drawio.svg"
                alt="per-test"
                width="600"
              />
            </div>
          </div>
        </section>
        <!-- 接下来讲下性能测试。因为毕设实现的是异步编程框架，
        因此这里主要进行框架和框架之间的性能对比。
        测试对象是实现的框架Emma和Kuro
        和开源社区中三个比较主流和高性能的异步编程框架Tokio，async-std和Go。
        同时，为了验证异步I/O和协程的高性能，添加一组对照组，同步I/O和多线程框架，
        名叫Sync框架。
        测试方法是用各个框架分别编写一个HTTP服务器应用程序，然后用Apache Benchmark
        这个测试工具对实现的服务器进行压力测试，最终对比测试结果。
        测试指标是服务器的吞吐量。-->

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h4>测试结果</h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  横坐标是HTTP请求数，纵坐标是服务器吞吐量；
                </li>
                <li style="margin-bottom: 5px">
                  随着请求数增大，服务器吞吐量趋于一个恒定值；
                </li>
                <li style="margin-bottom: 5px">
                  Emma和Kuro框架的吞吐量最高，Go框架的吞吐量最低；
                </li>
                <li style="margin-bottom: 5px">
                  Kuro框架比同步I/O和多线程框架在吞吐量指标上最高能达到78%的提升。
                </li>
              </ol>
            </div>
            <div class="image">
              <img
                src="images/test-result.png"
                alt="test-result"
                width="1000"
              />
            </div>
          </div>
        </section>
        <!-- 右边这两张图分别是在20和200个客户端并发请求条件下的测试结果。
        横坐标是HTTP请求数，纵坐标是服务器吞吐量。
        从图中可以看到，Emma和Kuro框架的整体吞吐量是最高的，Go框架的最低。
        这证明我们实现的两款框架都有比较好的性能。
        此外大部分异步编程框架的性能曲线都比同步I/O和多线程框架要高，
        其中Kuro框架最高可以比Sync框架高78%左右的性能，
        这证明了异步I/O和协程的高性能。-->

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <h4>总结与展望</h4>
          <div class="imageText">
            <div class="imageTextItem">
              <ol>
                <li style="margin-bottom: 5px">
                  基于Linux平台上的异步I/O技术（io_uring）和Rust/C++语言的协程技术设计并实现了两款
                  异步编程框架<mark>Emma和Kuro</mark>，在给上层应用开发带来便利的同时，验证了异步I/O和协程
                  的高效性；
                </li>
                <li style="margin-bottom: 5px">
                  后续计划可以从丰富功能和规范测试两个方面入手：
                </li>
                <ul>
                  <li style="margin-bottom: 5px">
                    为Emma和Kuro框架适配io_uring的高级用法，实现更多功能；
                  </li>
                  <li style="margin-bottom: 5px">
                    搭建更加规范，完善的测试环境，得出更准确，更全面的测试结果。
                  </li>
                </ul>
                <!-- <li style="margin-bottom: 5px"> -->
                <!--   感谢我的校内导师-华中科技大学的邵志远老师和校外导师-清华大学的陈渝老师。 -->
                <!-- </li> -->
              </ol>
            </div>
          </div>
        </section>

        <section
          data-background-image="images/background.jpg"
          data-background-opacity="0.25"
        >
          <div class="codeText">
            <div class="codeTextItem">
              <h3>毕设成果为本PPT的演示提供支持！</h3>
            </div>
            <div class="codeTextItem">
              <pre><code data-line-numbers data-trim data-noescape><script type="text/template">
                 <!-- 前端 -->
                <img src="http://172.26.222.85:3344/github.svg">

                // 后端
                async fn main() {
                  // 监听ip地址和端口
                  let listener = TcpListener::bind("0.0.0.0:3344").await;
                  
                  loop {
                    // 建立TCP连接
                    let stream = listener.accept().await;

                    Runtime::spawn(async move {
                      let mut buf = [0; BUF_LEN];
                      
                      // 接收HTTP请求
                      stream.recv(&mut buf).await;
                      
                      // 处理HTTP请求
                      handle_request(&mut buf);
                      
                      // 发送响应字节流
                      stream.send(&buf).await;
                    });
                  }
                }
              </script></code></pre>
            </div>
          </div>
        </section>
        <!-- 本PPT演示依赖于我的毕设成果提供的支持。
        这个PPT是一个前端项目，其中某些图片资源是请求后端返回的，
        而后端服务是基于毕设项目Emma搭建的。-->

        <section data-background-image="images/background.jpg" data-background-opacity=0.25>
          <div class="imageText">
            <div class="imageTextItem">
              <h2>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp感谢观看！</h2>
            </div>
            <div class="imageTextItem">
              <img src="images/chuangzhen.png" height="500" width="500">
            </div>
          </div>
        </section>

        <!-- <section -->
        <!--   data-background-image="images/background2.jpeg" -->
        <!--   data-background-opacity="0.25" -->
        <!-- > -->
        <!--   <h2>感谢观看！</h2> -->
        <!-- </section> -->
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
